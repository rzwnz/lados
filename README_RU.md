# –ü—Ä–æ–µ–∫—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ LADOS

–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ PyTorch –¥–ª—è –¥–∞—Ç–∞—Å–µ—Ç–∞ **LADOS** (Large-scale Aerial Dataset for Oil Spill detection). –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ, –¥–æ–æ–±—É—á–µ–Ω–∏–µ, –æ—Ü–µ–Ω–∫—É, serving –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏ –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä**: ResNet50, EfficientNet-B0, ViT-B/16
- **–ü–∞–π–ø–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏—è**: –°–º–µ—à–∞–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤, —Ä–∞–Ω–Ω—è—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- **FastAPI –±—ç–∫–µ–Ω–¥**: RESTful API –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –∏ –æ–±—É—á–µ–Ω–∏—è
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Celery + Redis –¥–ª—è –ø–∞–∫–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus, Grafana, —Å—Ç–µ–∫ ELK
- **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞**: Flutter –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **Docker Compose**: –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python ‚â•3.11
- GPU —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è RTX 4060 8GB VRAM) –∏–ª–∏ CPU
- Docker & Docker Compose
- Flutter SDK (–¥–ª—è Flutter —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- 1GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ –¥–ª—è –¥–∞—Ç–∞—Å–µ—Ç–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <repository-url>
cd lados
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Poetry (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
poetry install
poetry shell
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pip**
```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (API –∫–ª—é—á–∏, –ø—É—Ç–∏ –∏ —Ç.–¥.)
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞

**–†–µ–∂–∏–º –Ω–µ–±–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä–∫–∏ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
```bash
python scripts/download_lados.py \
    --output-dir data/raw \
    --processed-dir data/processed \
    --small-sample
```

**–ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è ROBOFLOW_API_KEY, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Roboflow
export ROBOFLOW_API_KEY=your_api_key
python scripts/download_lados.py \
    --output-dir data/raw \
    --processed-dir data/processed
```

### 5. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

```bash
# –û–±—É—á–µ–Ω–∏–µ ResNet50 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python scripts/train.py --config configs/train_resnet50.yaml

# –û–±—É—á–µ–Ω–∏–µ EfficientNet-B0
python scripts/train.py --config configs/train_efficientnet_b0.yaml

# –û–±—É—á–µ–Ω–∏–µ ViT-B/16
python scripts/train.py --config configs/train_vit.yaml

# –ü—Ä–æ–±–Ω—ã–π –∑–∞–ø—É—Å–∫ (–æ–¥–∏–Ω –±–∞—Ç—á)
python scripts/train.py --config configs/train_resnet50.yaml --dry-run
```

### 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
docker compose up -d
```

–≠—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç:
- FastAPI —Å–µ—Ä–≤–µ—Ä (http://localhost:8000)
- Celery worker
- Redis
- Elasticsearch
- Kibana (http://localhost:5601)
- Grafana (http://localhost:3000)
- Prometheus (http://localhost:9090)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
python scripts/check_services.py
```

**–ò–ª–∏ –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ:**
```bash
# –ó–∞–ø—É—Å–∫ FastAPI —Å–µ—Ä–≤–µ—Ä–∞
uvicorn src.server.app:app --host 0.0.0.0 --port 8000

# –ó–∞–ø—É—Å–∫ Celery worker (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
celery -A src.tasks.celery_app worker --loglevel=info
```

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/health

# –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
curl -X POST http://localhost:8000/predict \
  -F "file=@path/to/image.jpg"

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8000/metrics
```

### 8. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: Flutter –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–°–º. [flutter/sample_app/README.md](flutter/sample_app/README.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

```bash
cd flutter/sample_app
source ~/.zshrc  # –ó–∞–≥—Ä—É–∑–∏—Ç–µ Flutter PATH –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
flutter pub get
flutter run -d chrome --web-port 8080
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–†–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)**

–ü—Ä–æ—Å—Ç–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Python. –¢—Ä–µ–±—É–µ—Ç `streamlit` –∏ `plotly`:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install streamlit plotly requests

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ FastAPI —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
streamlit run streamlit_app.py
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:8501
```

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ Plotly
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è URL API –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `API_URL` –≤ `streamlit_app.py`.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lados/
‚îú‚îÄ‚îÄ configs/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±—É—á–µ–Ω–∏—è (YAML)
‚îú‚îÄ‚îÄ data/                 # –î–∞—Ç–∞—Å–µ—Ç (—Å—ã—Ä–æ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ README.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞—Å–µ—Ç—É
‚îú‚îÄ‚îÄ manifests/            # CSV –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã train/val/test
‚îú‚îÄ‚îÄ runs/                 # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è –∏ —á–µ–∫–ø–æ–∏–Ω—Ç—ã
‚îú‚îÄ‚îÄ scripts/              # –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ download_lados.py
‚îÇ   ‚îú‚îÄ‚îÄ train.py
‚îÇ   ‚îú‚îÄ‚îÄ export_model.py
‚îÇ   ‚îú‚îÄ‚îÄ check_services.py  # –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îî‚îÄ‚îÄ check_services.sh  # –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è (bash)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ data/            # –î–∞—Ç–∞—Å–µ—Ç –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ eval/             # –ú–µ—Ç—Ä–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ server/           # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ tasks/            # Celery –∑–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ tests/                # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ infra/                # Airflow DAGs
‚îú‚îÄ‚îÄ observability/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus, Grafana, ELK
‚îú‚îÄ‚îÄ flutter/              # Flutter –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ sample_app/       # Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ ops/                  # CI/CD workflows
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ Dockerfile            # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä API
‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ streamlit_app.py     # Streamlit —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îî‚îÄ‚îÄ README.md
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `configs/train_resnet50.yaml` (–∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä):

```yaml
data:
  root: "data/processed"
  img_size: 224

model:
  backbone: "resnet50"
  num_classes: 6
  pretrained: true

training:
  epochs: 50
  batch_size: 16
  mixed_precision: true
  gradient_accumulation_steps: 2
  early_stopping:
    enabled: true
    patience: 10
    metric: "val_macro_f1"
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

- `MODEL_PATH`: –ü—É—Ç—å –∫ —á–µ–∫–ø–æ–∏–Ω—Ç—É –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `runs/latest/checkpoint.pt`)
- `API_KEY`: API –∫–ª—é—á –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/train`
- `CELERY_BROKER_URL`: URL –±—Ä–æ–∫–µ—Ä–∞ Redis
- `MAX_UPLOAD_SIZE_MB`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10MB)
- `BATCH_JOB_THRESHOLD`: –ü–æ—Ä–æ–≥ —Ä–∞–∑–º–µ—Ä–∞ –±–∞—Ç—á–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 16)

## üìä –î–∞—Ç–∞—Å–µ—Ç

–î–∞—Ç–∞—Å–µ—Ç LADOS —Å–æ–¥–µ—Ä–∂–∏—Ç **3,388** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–∏–∫—Å–µ–ª—å–Ω–æ–π –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π –∏ **6 –∫–ª–∞—Å—Å–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**:
- `oil` - –ß–∏—Å—Ç—ã–µ —Ä–∞–∑–ª–∏–≤—ã –Ω–µ—Ñ—Ç–∏
- `emulsion` - –ù–µ—Ñ—Ç—è–Ω—ã–µ —ç–º—É–ª—å—Å–∏–∏
- `oil_platform` - –ù–µ—Ñ—Ç—è–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- `sheen` - –ù–µ—Ñ—Ç—è–Ω–∞—è –ø–ª–µ–Ω–∫–∞
- `ship` - –ö–æ—Ä–∞–±–ª–∏/—Å—É–¥–Ω–∞
- `background` - –§–æ–Ω/–±–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∞—Ç–∞—Å–µ—Ç–µ —Å–º. [data/README.md](data/README.md).

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest tests/ -v

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest tests/ -v --cov=src --cov-report=html

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/test_data.py -v
```

## üîç –ü—Ä–æ–±–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –ü—Ä–æ–±–Ω—ã–π —Ç–µ—Å—Ç –æ–±—É—á–µ–Ω–∏—è
bash scripts/smoke_train.sh

# –ü—Ä–æ–±–Ω—ã–π —Ç–µ—Å—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
bash scripts/smoke_infer.sh
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```bash
# Python —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python scripts/check_services.py

# Bash —Å–∫—Ä–∏–ø—Ç
./scripts/check_services.sh
```

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∑–¥–æ—Ä–æ–≤—å—è —Å–º. [SERVICE_HEALTH_CHECK.md](SERVICE_HEALTH_CHECK.md).

### –ú–µ—Ç—Ä–∏–∫–∏ Prometheus

- `inference_requests_total`: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- `inference_latency_seconds`: –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- `batch_jobs_total`: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á

–î–æ—Å—Ç—É–ø: http://localhost:8000/metrics/prometheus

### –î–∞—à–±–æ—Ä–¥ Grafana

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –∏–∑ `observability/grafana/dashboard.json`:
- –ó–∞–¥–µ—Ä–∂–∫–∞ –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU
- –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ –∫–ª–∞—Å—Å–∞–º
- –§—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å –æ–±—É—á–µ–Ω–∏—è –∏ F1 –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–î–æ—Å—Ç—É–ø: http://localhost:3000 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin/admin)

### –õ–æ–≥–∏ Kibana

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Elasticsearch. –î–æ—Å—Ç—É–ø –∫ Kibana: http://localhost:5601

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### –ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
- `POST /predict` - –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `POST /predict_batch` - –ü–∞–∫–µ—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (—Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –µ—Å–ª–∏ > –ø–æ—Ä–æ–≥–∞)
- `POST /train` - –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á)
- `GET /metrics` - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ–±—É—á–µ–Ω–∏—è/–∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- `GET /metrics/prometheus` - –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
- `GET /job/{job_id}` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏

## üê≥ Docker

### –°–±–æ—Ä–∫–∞

```bash
docker compose build
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker compose up -d
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker compose logs -f api
docker compose logs -f celery-worker
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker compose down
```

## üö¢ –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏

```bash
python scripts/export_model.py \
    --checkpoint runs/20240101_120000/checkpoint.pt \
    --output-dir runs/20240101_120000/exports \
    --formats torchscript onnx
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ API –∫–ª—é—á—É –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/train`
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10MB)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è)

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black src/ tests/ scripts/

# –õ–∏–Ω—Ç–∏–Ω–≥
ruff check src/ tests/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy src/ --ignore-missing-imports

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
isort src/ tests/ scripts/
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ GPU

- –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ –±–∞—Ç—á–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
- –í–∫–ª—é—á–∏—Ç–µ —Å–º–µ—à–∞–Ω–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å

### –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `MODEL_PATH` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —á–µ–∫–ø–æ–∏–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —á–µ–∫–ø–æ–∏–Ω—Ç—É

### –ó–∞–¥–∞—á–∏ Celery –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis: `docker compose ps redis`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `CELERY_BROKER_URL` –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ worker: `docker compose logs celery-worker`

### –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è: `python scripts/check_services.py`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs [service-name]`
- –°–º. [SERVICE_HEALTH_CHECK.md](SERVICE_HEALTH_CHECK.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Ç–µ—Å—Ç–∞–º–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–∏–Ω—Ç–∏–Ω–≥ –∏ —Ç–µ—Å—Ç—ã
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ pull request

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞—Ç–µ–ª–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ LADOS
- –°–æ–æ–±—â–µ—Å—Ç–≤–∞ PyTorch, FastAPI, Celery
- –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ open-source –ø—Ä–æ–µ–∫—Ç–æ–≤
- PMIFI supremacy xdxdxd

